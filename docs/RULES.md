# ごろごろしょうぎ ルール概要

こちらはリポジトリ内 CLI 実装（`main.go`）をもとにまとめたルール説明です。一般的なごろごろしょうぎの情報と突き合わせつつ、実装に依存する前提や簡略化がある場合は「※実装仕様」として明記します。

## 基本
- 盤面は 5 列×6 行。下（Bottom プレイヤー）が先手で上（Top プレイヤー）が後手。
- 列は左から a–e、行は下から 1–6（例: a1 が左下、e6 が右上）。
- 手番のプレイヤーが自分の駒を動かすか、持ち駒を打つ。
- 相手玉を詰ませた側が勝ち。

## 初期配置
- 下段 (1 段目): 銀・金・玉・金・銀（a1–e1）。
- 3 段目 (Bottom 側から数えて): 歩が b3, c3, d3 に並ぶ。
- 上段 (6 段目): 下段と左右対称の 銀・金・玉・金・銀。
- 4 段目: Top 側の歩が b4, c4, d4 に並ぶ。
- 2 段目と 5 段目は空マス。

## 駒の動き
- 玉: 八方に 1 マス。
- 金: 前・斜め前・真横・真後ろに 1 マス（前は敵陣方向）。  
  ※実装では「成り駒」（成り銀・と金）も金と同じ動き。
- 銀: 前方向 3 マス（前・斜め前左右）＋斜め後ろ 2 マスに 1 歩ずつ。
- 歩: 前に 1 マス。
- 取った駒は自分の持ち駒になり、後で打てる。

## 成り
- 成れる駒: 歩と銀のみ。玉と金は成らない。
- 成りゾーン: 相手陣の最終 2 段（Bottom なら 5–6 段目、Top なら 1–2 段目）。  
  ※実装仕様: これらの段に「移動して着地する」手でのみ成り選択が可能（入るときに任意）。盤内での不成のまま滞在は可能。
- 成り効果: 成り銀・と金は金の動きになる（駒表示は `+S`, `+P`）。

## 打ち駒
- 持ち駒を空マスに 1 枚打てる。直後から自駒として利用可能。
- 持ち駒の減少・盤上への配置のみを行う。  
  ※実装仕様: 二歩などの追加禁止手は実装されていない。

## 禁じ手とチェック
- 自玉が取られる状態（王手）を放置したままの手は指せない。移動・打ちのいずれでも、自玉が王手でない状態を保つ必要がある。
- 王手・詰みの判定は各駒の移動先の 1 マスのみを対象とし、長距離攻撃は存在しないため見落としはない。

## 勝敗
- 相手玉を詰ませれば勝ち。自玉が詰められた時点で敗北。
- 千日手や持将棋、反則負けなどの特別ルールは実装されていない。

## 入力表記（CLI 実装）
- 移動: `a1a2` のように from→to を列行 2 文字ずつで続けて記述。成りは末尾 `+`（例: `a3a4+`）。空白区切り `a1 a2` も許容。
- 打ち: `P@b3` のように `駒種@座標`。駒種は `K`玉/`G`金/`S`銀/`P`歩。
- 座標は a–e, 1–6。大文字小文字は不問。

## 実装上の主な簡略化・注意
- 二歩や打ち歩詰めなどの細かい反則は未チェック。
- 成りは「相手陣 2 段に入る手」にのみ選択肢が出る（出る手では成れない）。
- 盤外・自殺手（自玉放置）は自動で弾かれる。
- 先手＝Bottom, 後手＝Top が固定。先後入れ替え機能なし。
